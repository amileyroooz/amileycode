import random

while True:
    # 🎯 گرفتن تعداد راند با کنترل ورودی
    while True:
        rounds_input = input("How many rounds do you want to play?\n")
        try:
            rounds = int(rounds_input)
            if rounds <= 0:
                print("Please enter a positive number.")
                continue
            elif rounds > 20:
                print("Maximum allowed rounds is 20. Please enter a smaller number.")
                continue
            break
        except ValueError:
            print("❌ Invalid input. Please enter a number.")

    # 🧮 امتیازها
    user_score = 0
    computer_score = 0
    current_round = 1
    game_stopped = False

    # 🔁 حلقه بازی
    while current_round <= rounds:
        print(f"\n🎲 Round {current_round} of {rounds}")

        your_choice = input(
            # strings methods
            "rock, paper, scissors? (or type 'quit' to exit):\n"
        ).strip().replace(" ", "").lower()

        if your_choice == "quit":
            print("\n🚪 Game stopped by user.")
            game_stopped = True
            break

        if your_choice not in ["rock", "paper", "scissors"]:
            print("❌ Invalid choice! Please try again.")
            continue

        computer_choice = random.choice(["rock", "paper", "scissors"])

        print(f"\n🧑 You chose: {your_choice}")
        print(f"💻 Computer chose: {computer_choice}")
        print(f"⚔️ {your_choice} vs {computer_choice}")

        if your_choice == computer_choice:
            print("🤝 It's a DRAW. No points awarded.")
        elif (your_choice == "rock" and computer_choice == "scissors" or
              your_choice == "paper" and computer_choice == "rock" or
              your_choice == "scissors" and computer_choice == "paper"
              ):
            print("✅ You WON this round!")
            user_score += 1
        else:
            print("❌ You LOST this round!")
            computer_score += 1

        print(f"\n📊 Score → You: {user_score} | Computer: {computer_score}")
        current_round += 1

    # 🏁 پایان بازی فقط اگر کامل انجام شده باشه
    if not game_stopped:
        print("\n🎮 Final Scores:")
        print(f"🧑 You: {user_score}")
        print(f"💻 Computer: {computer_score}")
        print(f"📦 Total rounds played: {current_round - 1}") # -1 for last round

        if user_score > computer_score:
            print("\n🏆 You are the WINNER!")
        elif computer_score > user_score:
            print("\n😔 Computer wins. Better luck next time!")
        else:
            print("\n🤝 It's a DRAW overall!")

    # 🔁 پرسیدن برای ادامه بازی
    play_again = input(
        "\nDo you want to play again? (yes/no):\n").strip().lower().replace(" ","")
    if play_again != "yes":
        print("\n👋 Thanks for playing! Goodbye.")
        break
